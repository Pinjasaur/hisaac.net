<!DOCTYPE html>
<html lang="en">
{% include head.html %}
<body>
<div class="body-container">

	{% include header.html %}
	{% include nav.html %}

	<main class="post-list">

		{% capture linkIcon %}
			<img class="octicon link-external" src="./assets/img/octicons/link-external.svg" />
		{% endcapture %}

		{% for post in site.posts  %}
			{% capture this_year %}{{ post.date | date: "%Y" }}{% endcapture %}
			{% capture this_month %}{{ post.date | date: "%B" }}{% endcapture %}

			{% capture next_year %}{{ post.previous.date | date: "%Y" }}{% endcapture %}
			{% capture next_month %}{{ post.previous.date | date: "%B" }}{% endcapture %}

			{% if forloop.first %}

				<h2 id="{{ this_year }}-ref">{{this_year}}</h2>
				<h4 id="{{ this_year }}-{{ this_month }}-ref">{{ this_month }}</h4>
				<ul>

			{% endif %}
			
			{% if post.link %}
				
				<li><a href="{{ post.url }}">{{ post.title }}{{ linkIcon }}</a></li>

			{% else %}

				<li><a href="{{ post.url }}">{{ post.title }}</a></li>

			{% endif %}

			{% if forloop.last %}

				</ul>

			{% else %}
				{% if this_year != next_year %}

					</ul>
					<h2 id="{{ next_year }}-ref">{{next_year}}</h2>
					<h4 id="{{ next_year }}-{{ next_month }}-ref">{{ next_month }}</h4>
					<ul>

				{% else %}    
					{% if this_month != next_month %}

						</ul>
						<h4 id="{{ this_year }}-{{ next_month }}-ref">{{ next_month }}</h4>
						<ul>

					{% endif %}
				{% endif %}
			{% endif %}
		{% endfor %}

	</main>

	{% include footer.html %}

</div>
</body>
</html>